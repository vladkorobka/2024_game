var e=document.querySelector(".button"),t=document.querySelector(".message-start"),r=document.querySelector(".message-win"),n=document.querySelector(".message-lose"),o=document.querySelector(".game-score"),a=document.querySelectorAll(".field-row"),s={UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",LEFT:"ArrowLeft"},c=[],f=0,l=!1,i=!1,u=!1;function d(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)if(e[r][n]!==t[r][n])return!1;return!0}function h(e){c=e,m(),L()}function v(e){return e.filter(function(e){return 0!==e})}function g(e,t,r){for(var n=[],o=0;o<t;o++){for(var a=[],s=0;s<r;s++)a.push(e[s][o]);n.push(a)}return n}function m(){for(var e=!0,t=.9>Math.random()?2:4;e;){var r=Math.floor(4*Math.random()),o=Math.floor(4*Math.random());0===c[r][o]&&(c[r][o]=t,e=!1)}(function(){for(var e=0;e<4;e++)for(var t=0;t<4;t++){if(0===c[e][t])return!1;var r=c[e][t+1];if(void 0!==r&&c[e][t]===r)return!1}for(var n=0;n<4;n++)for(var o=0;o<3;o++){var a=c[o+1][n];if(void 0!==a&&c[o][n]===a)return!1}return!0})()&&(l=!0,u=!1,n.classList.remove("hidden"))}function L(){for(var e=0;e<c.length;e++)for(var t=0;t<c[e].length;t++){var n=a[e].children[t],s=c[e][t];s?(n.textContent=s,n.className="field-cell",n.classList.add("field-cell--".concat(s)),2048===s&&(i=!0,u=!1,r.classList.remove("hidden"))):(n.textContent="",n.className="field-cell"),o.textContent=f}}document.addEventListener("keydown",function(e){var t,r,n,o,a,m;if(e.preventDefault(),u&&!l&&!i)switch(e.key){case s.UP:t=g(c,4,4),r=[],t.forEach(function(e){for(var t=v(e),n=0;n<t.length;n++)t[n]===t[n+1]&&(t[n]*=2,f+=t[n],t[n+1]=0);for(t=v(t);t.length<4;)t.push(0);r.push(t)}),d(c,g(r,4,4))||h(g(r,4,4));break;case s.DOWN:n=g(c,4,4),o=[],n.forEach(function(e){for(var t=v(e),r=t.length-1;r>=0;r--)t[r]===t[r-1]&&(t[r]*=2,f+=t[r],t[r-1]=0);for(t=v(t);t.length<4;)t.unshift(0);o.push(t)}),d(c,g(o,4,4))||h(g(o,4,4));break;case s.RIGHT:a=[],c.forEach(function(e){for(var t=v(e),r=t.length-1;r>=0;r--)t[r]===t[r-1]&&(t[r]*=2,f+=t[r],t[r-1]=0);for(t=v(t);t.length<4;)t.unshift(0);a.push(t)}),d(c,a)||h(a);break;case s.LEFT:m=[],c.forEach(function(e){for(var t=v(e),r=0;r<t.length;r++)t[r]===t[r+1]&&(t[r]*=2,f+=t[r],t[r+1]=0);for(t=v(t);t.length<4;)t.push(0);m.push(t)}),d(c,m)||h(m);break;default:return}}),e.addEventListener("click",function(){e.classList.contains("start")&&(e.textContent="Restart",e.classList.add("restart"),e.classList.remove("start"),t.classList.add("hidden")),function(){t.classList.add("hidden"),n.classList.add("hidden"),r.classList.add("hidden"),o.textContent=0,u=!0,l=!1,i=!1,f=0,c=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(var e=0;e<c.length;e++)for(var s=0;s<c[e].length;s++){var d=a[e].children[s];d.textContent="",d.className="field-cell"}m(),m(),L()}()});
//# sourceMappingURL=index.22974814.js.map
